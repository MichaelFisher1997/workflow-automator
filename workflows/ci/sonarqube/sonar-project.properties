# ---
# id: ci/sonarqube-config
# category: ci
# type: template
# name: SonarQube Configuration
# description: sonar-project.properties configuration file for PHP/Drupal projects
# targetPath: sonar-project.properties
# secrets:
#   - name: SONAR_TOKEN
#     description: SonarQube authentication token
#     required: true
#   - name: SONAR_HOST_URL
#     description: SonarQube server URL (e.g., https://sonar.example.com)
#     required: true
# triggers: []
# variants:
#   - name: standard
#     description: PHP/Drupal project configuration
# ---

# =============================================================================
# SonarQube Project Configuration for PHP/Drupal
# =============================================================================
# Copy this file to your project root and customize the values below.
# Required secrets in GitHub: SONAR_TOKEN, SONAR_HOST_URL

# Project identification (REQUIRED - change these for your project)
sonar.projectKey=your-project-key
sonar.projectName=Your Project Name
sonar.projectVersion=1.0

# SonarQube server URL (set via SONAR_HOST_URL secret, or uncomment below)
# sonar.host.url=https://sonar.example.com

# Source paths (relative to project root)
sonar.sources=web/modules/custom,web/themes/custom

# Encoding
sonar.sourceEncoding=UTF-8

# Test directories (adjust to match your project structure)
# sonar.tests=web/modules/custom/your_module/tests

# Exclusions - third-party libraries, generated files, and Drupal core/contrib
sonar.exclusions=**/vendor/**,**/node_modules/**,**/libraries/**,**/dist/**
sonar.exclusions+=**/css/**,**/*.min.js,**/*.min.css
sonar.exclusions+=**/tests/**,**/test/**,**/spec/**
sonar.exclusions+=web/core/**,web/modules/contrib/**,web/themes/contrib/**
sonar.exclusions+=web/profiles/contrib/**,web/libraries/**,**/config/**,**/files/**

# PHP-specific settings
sonar.php.file.suffixes=php,module,inc,install,profile,theme

# Coverage exclusions (files that don't need test coverage)
sonar.coverage.exclusions=**/*.xml,**/*.yml,**/*.yaml,**/*.md

# GitHub integration
sonar.pullrequest.provider=github
sonar.pullrequest.github.repository=your-org/your-repo

# Analysis scope
sonar.scm.revision=${env.GITHUB_SHA}
